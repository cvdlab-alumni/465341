#from pyplasm import *

import sys
sys.path.append("/home/roberto/Scrivania/larpy")

from lar import *
from scipy import *

"""Funzione per generare una griglia di complessi simpliciali"""
def GRID(args):
	model = ([[]],[[0]])
	for k,steps in enumerate(args):
		model = larExtrude(model,steps*[1])
	V,cells = model
	verts = AA(list)(scipy.array(V)/AA(float)(args))
	return MKPOL([verts,AA(AA(lambda h:h+1))(cells),None])
	
domain = S([1])(2*PI)(GRID([25,25]))
domain2 = GRID([25,25])
dominio2D = S([1])(2*PI)(MAP([S2,S1])(GRID([25,25])))
dominio2D2 = MAP([S2,S1])(GRID([25,25]))
Dom1D = INTERVALS(1)(24)



points1=[[0,0,0],[4.6,0,0],[1,0.5,0],[1,-0.5,0]]
curva1 = CUBICHERMITE(S1)(points1)
p1 = MAP(curva1)(Dom1D)

points2=[[0.1,0.7,0.1],[4.5,0.7,0.1],[1,0.5,0],[1,-0.5,0]]
curva2 = CUBICHERMITE(S1)(points2)
p2 = MAP(curva2)(Dom1D)

#alette=STRUCT([p1,p2])
#VIEW(alette)

superficie1=MAP(BEZIER(S2)([curva1,curva2]))(domain2)
sup=T([1])(-2.3)(superficie1)
#VIEW(sup)
sup2=T([2,3])([-0.5,-0.18])(S([1,2,3])([0.95,0.95,0.95])(sup))
sup3=T([2,3])([-0.5,-0.18])(S([1,2,3])([0.95,0.95,0.95])(sup2))
sup4=T([2,3])([-0.5,-0.18])(S([1,2,3])([0.95,0.95,0.95])(sup3))
sup5=T([2,3])([-0.5,-0.18])(S([1,2,3])([0.95,0.95,0.95])(sup4))
sup6=T([2,3])([-0.5,-0.18])(S([1,2,3])([0.95,0.95,0.95])(sup5))

points2=[[-2.2,0.7,0.15],[2.3,0.7,0.15],[1,0.5,0],[1,-0.5,0]]
curva2 = CUBICHERMITE(S1)(points2)
p2 = MAP(curva2)(Dom1D)

points3=[[-2.2,2.5,0.5],[2.3,2.5,0.5],[1,0.5,0],[1,-0.5,0]]
curva3 = CUBICHERMITE(S1)(points3)
p3 = MAP(curva3)(Dom1D)
points4=[[-2.2,3.8,0.15],[2.3,3.8,0.15],[1,0.5,0],[1,-0.5,0]]
curva4 = CUBICHERMITE(S1)(points4)
p4 = MAP(curva4)(Dom1D)
points5=[[-2,-2.3,-0.8],[2.1,-2.3,-0.8],[1,0.5,0],[1,-0.5,0]]
curva5 = CUBICHERMITE(S1)(points5)
p5 = MAP(curva5)(Dom1D)
points6=[[-2,-3.9,-1],[2.1,-3.9,-1],[1,0.5,0],[1,-0.5,0]]
curva6 = CUBICHERMITE(S1)(points6)
p6 = MAP(curva6)(Dom1D)
#VIEW(p3)
sup7=COLOR(YELLOW)(MAP(BEZIER(S2)([curva2,curva3,curva4]))(domain2))
sup8=COLOR(YELLOW)(MAP(BEZIER(S2)([curva5,curva6]))(domain2))
alette=STRUCT([sup,sup2,sup3,sup4,sup5,sup6,sup7,sup8])
VIEW(alette)
